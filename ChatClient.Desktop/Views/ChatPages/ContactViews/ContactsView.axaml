<UserControl
    x:Class="ChatClient.Desktop.Views.ChatPages.ContactViews.ContactsView"
    xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:content="https://github.com/kikipoulet/SukiUI"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:regions="http://prismlibrary.com/"
    xmlns:suki="clr-namespace:SukiUI.Controls;assembly=SukiUI"
    xmlns:vm="clr-namespace:ChatClient.Desktop.ViewModels.ChatPages.ContactViews"
    xmlns:avalonia="clr-namespace:Material.Icons.Avalonia;assembly=Material.Icons.Avalonia"
    xmlns:seperateGroupsView="clr-namespace:ChatClient.Avalonia.Controls.SeperateGroupsView;assembly=ChatClient.Avalonia"
    xmlns:uiEntity1="clr-namespace:ChatClient.Tool.UIEntity;assembly=ChatClient.Tool"
    xmlns:groupSepatateGroupsView="clr-namespace:ChatClient.Avalonia.Controls.GroupGroup.GroupSepatateGroupsView;assembly=ChatClient.Avalonia"
    xmlns:searchBox="clr-namespace:ChatClient.Avalonia.Controls.SearchBox;assembly=ChatClient.Avalonia"
    xmlns:converter="clr-namespace:ChatClient.Avalonia.Converter;assembly=ChatClient.Avalonia"
    d:DesignHeight="450"
    d:DesignWidth="800"
    x:DataType="vm:ContactsViewModel"
    mc:Ignorable="d">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition
                MinWidth="200" MaxWidth="300" Width="250" />
            <ColumnDefinition Width="1.2" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

        <!-- 左侧面板 -->
        <Grid Grid.Column="0" RowDefinitions="70,*">
            <suki:GlassCard Padding="0" Margin="0" CornerRadius="0" Opacity="0.5" Grid.Row="0" Grid.RowSpan="2" />
            <!-- 顶部 -->
            <suki:GlassCard Padding="8"
                            Grid.Row="0"
                            CornerRadius="2"
                            Height="70"
                            Margin="0,0,0,0"
                            BorderThickness="0,0,0,1.5">
                <DockPanel LastChildFill="True">
                    <Button Classes="Add"
                            Name="PART_AddButton"
                            CornerRadius="8"
                            Padding="0"
                            Margin="7,3,0,1.5"
                            VerticalAlignment="Bottom"
                            DockPanel.Dock="Right"
                            Click="PART_AddButton_OnClick"
                            Height="27"
                            Width="27"
                            Background="{DynamicResource SukiBorderBrush}">
                        <avalonia:MaterialIcon Kind="Plus" HorizontalAlignment="Center" />
                    </Button>
                    <searchBox:SearchBox WaterMask="搜索" SearchText="{Binding SearchText}" />
                </DockPanel>
            </suki:GlassCard>

            <!-- 好友列表 -->
            <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Hidden" HorizontalScrollBarVisibility="Disabled"
                          Margin="0,0,0,0">
                <StackPanel x:Name="LeftPanel" Orientation="Vertical"
                            content:StackPanelExtensions.AnimatedScroll="True">
                    <Button Classes="Chat"
                            Margin="0"
                            HorizontalContentAlignment="Stretch"
                            Click="Button_OnClick"
                            Padding="20,9"
                            Command="{Binding ToFriendRequestViewCommand}">
                        <Grid>
                            <PathIcon HorizontalAlignment="Right"
                                      Width="12"
                                      Height="12"
                                      Opacity="0.8"
                                      VerticalAlignment="Center"
                                      Data="{x:Static content:Icons.ChevronLeft}">
                                <PathIcon.RenderTransform>
                                    <RotateTransform Angle="180" />
                                </PathIcon.RenderTransform>
                            </PathIcon>
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Left">
                                <TextBlock Text="好友通知" />
                                <Border
                                    Height="15"
                                    MinWidth="15"
                                    Background="Red"
                                    Margin="5,0"
                                    Padding="3,0"
                                    VerticalAlignment="Center"
                                    CornerRadius="10"
                                    IsVisible="{Binding User.UnreadFriendMessageCount, Converter={converter:IntEqualityConverter Equal=False, Value=0}}">
                                    <TextBlock
                                        Padding="0"
                                        Margin="1,0.5,0,0"
                                        HorizontalAlignment="Center"
                                        VerticalAlignment="Center"
                                        FontSize="10"
                                        Foreground="White"
                                        Text="{Binding User.UnreadFriendMessageCount, Converter={converter:UnReadMessageCountConverter}}" />
                                </Border>
                            </StackPanel>
                        </Grid>
                    </Button>
                    <Button Classes="Chat"
                            Margin="0"
                            Padding="20,9"
                            HorizontalContentAlignment="Stretch"
                            Click="Button_OnClick"
                            Command="{Binding ToGroupRequestViewCommand}">
                        <Grid>
                            <PathIcon HorizontalAlignment="Right"
                                      Width="12"
                                      Height="12"
                                      Opacity="0.8"
                                      VerticalAlignment="Center"
                                      Data="{x:Static content:Icons.ChevronLeft}">
                                <PathIcon.RenderTransform>
                                    <RotateTransform Angle="180" />
                                </PathIcon.RenderTransform>
                            </PathIcon>
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Left">
                                <TextBlock Text="群聊通知" />
                                <Border
                                    Height="15"
                                    MinWidth="15"
                                    Background="Red"
                                    Margin="5,0"
                                    Padding="3,0"
                                    VerticalAlignment="Center"
                                    CornerRadius="10"
                                    IsVisible="{Binding User.UnreadGroupMessageCount, Converter={converter:IntEqualityConverter Equal=False, Value=0}}">
                                    <TextBlock
                                        Padding="0"
                                        Margin="0"
                                        HorizontalAlignment="Center"
                                        VerticalAlignment="Center"
                                        FontSize="10"
                                        Foreground="White"
                                        Text="{Binding User.UnreadGroupMessageCount, Converter={converter:UnReadMessageCountConverter}}" />
                                </Border>
                            </StackPanel>
                        </Grid>
                    </Button>
                    <Border Background="{DynamicResource SukiBorderBrush}" Height="1.5" />
                    <TabControl TabIndex="0" Margin="0,10,0,0">
                        <TabControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Spacing="20" />
                            </ItemsPanelTemplate>
                        </TabControl.ItemsPanel>
                        <TabItem Header="好友">
                            <Panel>
                                <TextBlock Text="还没有添加好友"
                                           Margin="0,50"
                                           VerticalAlignment="Center"
                                           HorizontalAlignment="Center"
                                           Opacity="0.6"
                                           FontWeight="SemiBold"
                                           IsVisible="{Binding GroupFriends.Count ,Converter={converter:ListEmptyConverter}}">
                                </TextBlock>
                                <seperateGroupsView:SeparateGroupsView
                                    x:Name="FriendView"
                                    IsVisible="{Binding !GroupFriends,Converter={converter:ListEmptyConverter}}"
                                    GroupFriends="{Binding GroupFriends}"
                                    SelectionChanged="FriendSelectionChanged"
                                    DeleteGroupCommand="{Binding DeleteGroupCommand}"
                                    AddGroupCommand="{Binding AddGroupCommand}"
                                    RenameGroupCommand="{Binding RenameGroupCommand}"
                                    SelectionChangedCommand="{Binding SelectedChangedCommand}" />
                            </Panel>
                        </TabItem>
                        <TabItem Header="群聊">
                            <Panel>
                                <TextBlock Text="还没有加入群聊"
                                           Margin="0,50"
                                           VerticalAlignment="Center"
                                           HorizontalAlignment="Center"
                                           Opacity="0.6"
                                           FontWeight="SemiBold"
                                           IsVisible="{Binding GroupGroups,Converter={converter:ListEmptyConverter}}" />
                                <groupSepatateGroupsView:GroupSeparateGroupsView x:Name="GroupView"
                                    IsVisible="{Binding !GroupGroups.Count,Converter={converter:ListEmptyConverter}}"
                                    GroupFriends="{Binding GroupGroups}"
                                    SelectionChanged="GroupSelectionChanged"
                                    DeleteGroupCommand="{Binding DeleteGroupCommand}"
                                    AddGroupCommand="{Binding AddGroupCommand}"
                                    RenameGroupCommand="{Binding RenameGroupCommand}"
                                    SelectionChangedCommand="{Binding SelectedChangedCommand}" />
                            </Panel>
                        </TabItem>
                    </TabControl>
                </StackPanel>
            </ScrollViewer>
        </Grid>

        <GridSplitter Grid.Column="1" Background="{DynamicResource SukiBorderBrush}" />

        <ContentControl Grid.Column="2"
                        regions:RegionManager.RegionName="{x:Static uiEntity1:RegionNames.ContactsRegion}" />
    </Grid>
</UserControl>