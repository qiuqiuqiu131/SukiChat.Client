<UserControl
    x:Class="ChatClient.Desktop.Views.ChatPages.ThemeView"
    xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:avalonia="clr-namespace:Material.Icons.Avalonia;assembly=Material.Icons.Avalonia"
    xmlns:chatPages="clr-namespace:ChatClient.Desktop.Views.ChatPages"
    xmlns:converter="clr-namespace:ChatClient.Avalonia.Converter;assembly=ChatClient.Avalonia"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:models="https://github.com/kikipoulet/SukiUI"
    xmlns:objectModel="clr-namespace:System.Collections.ObjectModel;assembly=System.ObjectModel"
    xmlns:suki="clr-namespace:SukiUI.Controls;assembly=SukiUI"
    xmlns:vm="using:ChatClient.Desktop.ViewModels.ChatPages"
    d:DesignHeight="450"
    d:DesignWidth="800"
    x:DataType="vm:ThemeViewModel"
    mc:Ignorable="d">
    <UserControl.Resources>
        <converter:EqualityConverter x:Key="EqualityConverter" />
    </UserControl.Resources>
    <suki:SukiStackPage Margin="20">
        <suki:SukiStackPage.Content>
            <suki:SettingsLayout Name="Theming" StackSummaryWidth="270">
                <suki:SettingsLayout.Items>
                    <objectModel:ObservableCollection x:TypeArguments="suki:SettingsLayoutItem">
                        <suki:SettingsLayoutItem Header="Base Theme">
                            <suki:SettingsLayoutItem.Content>
                                <StackPanel
                                    HorizontalAlignment="Center"
                                    Orientation="Horizontal"
                                    Spacing="20">
                                    <RadioButton
                                        Width="180"
                                        Height="160"
                                        Padding="0"
                                        Classes="GigaChips"
                                        GroupName="RadioBaseTheme"
                                        IsChecked="{Binding ThemeStyle.IsLight}">
                                        <Border
                                            Margin="-50"
                                            Background="#fafafa"
                                            CornerRadius="{DynamicResource MediumCornerRadius}">
                                            <Grid>
                                                <TextBlock
                                                    Margin="58,42,42,42"
                                                    HorizontalAlignment="Center"
                                                    VerticalAlignment="Bottom"
                                                    FontWeight="DemiBold"
                                                    Foreground="#555555"
                                                    Text="Light Mode" />
                                            </Grid>
                                        </Border>
                                    </RadioButton>

                                    <RadioButton
                                        Width="180"
                                        Height="160"
                                        Classes="GigaChips"
                                        GroupName="RadioBaseTheme"
                                        IsChecked="{Binding !ThemeStyle.IsLight}">
                                        <Border
                                            Margin="-50"
                                            Background="#222222"
                                            CornerRadius="{DynamicResource MediumCornerRadius}">
                                            <Grid>
                                                <TextBlock
                                                    Margin="58,42,42,42"
                                                    HorizontalAlignment="Center"
                                                    VerticalAlignment="Bottom"
                                                    FontWeight="DemiBold"
                                                    Foreground="#fafafa"
                                                    Text="Dark Mode" />
                                            </Grid>
                                        </Border>
                                    </RadioButton>
                                </StackPanel>
                            </suki:SettingsLayoutItem.Content>
                        </suki:SettingsLayoutItem>

                        <suki:SettingsLayoutItem Header="Color Theme">
                            <suki:SettingsLayoutItem.Content>
                                <ItemsControl HorizontalAlignment="Center" ItemsSource="{Binding AvailableColors}">
                                    <ItemsControl.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <StackPanel
                                                HorizontalAlignment="Center"
                                                Orientation="Horizontal"
                                                Spacing="10" />
                                        </ItemsPanelTemplate>
                                    </ItemsControl.ItemsPanel>
                                    <ItemsControl.Styles>
                                        <Style Selector="RadioButton.h">
                                            <Setter Property="Background" Value="Transparent" />
                                            <Setter Property="CornerRadius" Value="{DynamicResource MediumCornerRadius}" />
                                            <Setter Property="Margin" Value="0" />
                                            <Setter Property="Template">
                                                <ControlTemplate>
                                                    <suki:GlassCard
                                                        Name="BigBorder"
                                                        Margin="4"
                                                        Padding="15,15,15,15"
                                                        ClipToBounds="True"
                                                        CornerRadius="{TemplateBinding CornerRadius}"
                                                        IsInteractive="True">
                                                        <ContentPresenter
                                                            Name="PART_ContentPresenter"
                                                            Content="{TemplateBinding Content}"
                                                            ContentTemplate="{TemplateBinding ContentTemplate}"
                                                            FontSize="{TemplateBinding FontSize}"
                                                            RecognizesAccessKey="True" />
                                                    </suki:GlassCard>
                                                </ControlTemplate>
                                            </Setter>
                                        </Style>
                                    </ItemsControl.Styles>
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate x:DataType="models:SukiColorTheme">
                                            <RadioButton
                                                Width="50"
                                                Height="50"
                                                Padding="3"
                                                BorderThickness="5"
                                                Classes="h"
                                                Command="{Binding ((vm:ThemeViewModel)DataContext).SwitchToColorThemeCommand, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type chatPages:ThemeView}}}"
                                                CommandParameter="{Binding}"
                                                CornerRadius="50"
                                                GroupName="RadioColorTheme">
                                                <RadioButton.IsChecked>
                                                    <MultiBinding Converter="{StaticResource EqualityConverter}">
                                                        <Binding Path="((vm:ThemeViewModel)DataContext).SelectedColorTheme" RelativeSource="{RelativeSource AncestorType={x:Type chatPages:ThemeView}}" />
                                                        <Binding />
                                                    </MultiBinding>
                                                </RadioButton.IsChecked>
                                                <RadioButton.Styles>
                                                    <Style Selector="RadioButton.h Border">
                                                        <Setter Property="Transitions">
                                                            <Transitions>
                                                                <CornerRadiusTransition Property="CornerRadius" Duration="0.3" />
                                                            </Transitions>
                                                        </Setter>
                                                    </Style>
                                                    <Style Selector="RadioButton.h:checked Border">
                                                        <Setter Property="CornerRadius" Value="10" />
                                                    </Style>
                                                    <Style Selector="RadioButton.h:pointerover Border">
                                                        <Setter Property="CornerRadius" Value="10" />
                                                    </Style>
                                                    <Style Selector="RadioButton.h avalonia|MaterialIcon">
                                                        <Setter Property="IsVisible" Value="False" />
                                                    </Style>
                                                    <Style Selector="RadioButton.h:checked avalonia|MaterialIcon">
                                                        <Setter Property="IsVisible" Value="True" />
                                                    </Style>
                                                </RadioButton.Styles>
                                                <Border
                                                    Margin="-30"
                                                    Background="{Binding PrimaryBrush}"
                                                    CornerRadius="50">
                                                    <avalonia:MaterialIcon
                                                        Width="20"
                                                        Height="20"
                                                        Margin="-5"
                                                        Foreground="{DynamicResource SukiStrongBackground}"
                                                        Kind="CheckBold" />
                                                </Border>
                                            </RadioButton>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                            </suki:SettingsLayoutItem.Content>
                        </suki:SettingsLayoutItem>

                        <suki:SettingsLayoutItem Header="Background">
                            <suki:SettingsLayoutItem.Content>
                                <StackPanel>
                                    <suki:GlassCard Margin="0,25,0,0" Padding="25">
                                        <StackPanel Spacing="40">
                                            <DockPanel>
                                                <ToggleSwitch
                                                    VerticalAlignment="Top"
                                                    Classes="Switch"
                                                    DockPanel.Dock="Right"
                                                    IsChecked="{Binding ThemeStyle.AnimationsEnabled}" />
                                                <StackPanel HorizontalAlignment="Left">
                                                    <TextBlock
                                                        FontSize="16"
                                                        FontWeight="DemiBold"
                                                        Text="Animated Background" />
                                                    <TextBlock
                                                        Margin="0,12,70,0"
                                                        Foreground="{DynamicResource SukiLowText}"
                                                        Text="Enable/disable the animations for the background, which are driven by the currently active effect."
                                                        TextWrapping="Wrap" />
                                                </StackPanel>
                                            </DockPanel>
                                            <DockPanel>
                                                <ToggleSwitch
                                                    VerticalAlignment="Top"
                                                    DockPanel.Dock="Right"
                                                    IsChecked="{Binding ThemeStyle.TransitionsEnabled}" />
                                                <StackPanel HorizontalAlignment="Left">
                                                    <TextBlock
                                                        FontSize="16"
                                                        FontWeight="DemiBold"
                                                        Text="Background Transitions" />
                                                    <TextBlock
                                                        Margin="0,12,70,0"
                                                        Foreground="{DynamicResource SukiLowText}"
                                                        Text="Enable/disable the transitions for the background, these will fade between the active effects when changed."
                                                        TextWrapping="Wrap" />
                                                </StackPanel>
                                            </DockPanel>

                                        </StackPanel>
                                    </suki:GlassCard>
                                    <suki:GlassCard Margin="0,45,0,0" Padding="25">
                                        <DockPanel>
                                            <ComboBox
                                                DockPanel.Dock="Right"
                                                ItemsSource="{Binding AvailableBackgroundStyles}"
                                                SelectedItem="{Binding ThemeStyle.BackgroundStyle}" />
                                            <StackPanel HorizontalAlignment="Left">
                                                <TextBlock
                                                    FontSize="16"
                                                    FontWeight="DemiBold"
                                                    Text="Background Style" />
                                                <TextBlock
                                                    Margin="0,12,70,0"
                                                    Foreground="{DynamicResource SukiLowText}"
                                                    Text="Select from the included background styles."
                                                    TextWrapping="Wrap" />
                                            </StackPanel>
                                        </DockPanel>
                                    </suki:GlassCard>
                                </StackPanel>
                            </suki:SettingsLayoutItem.Content>
                        </suki:SettingsLayoutItem>
                    </objectModel:ObservableCollection>
                </suki:SettingsLayout.Items>
            </suki:SettingsLayout>
        </suki:SukiStackPage.Content>
    </suki:SukiStackPage>
</UserControl>
